# Using the HistoryInteractions Microfrontend

This guide shows how to integrate and use the HistoryInteractions microfrontend in your application.

## How to use in the main app

### Method 1: Lazy loading (Recommended)

```tsx
import React, { lazy, Suspense } from 'react';

const HistoryInteractions = lazy(() => import('historyInteractions/HistoryInteractions'));

export default function HistoryInteractionsRoute() {
  return (
    <Suspense fallback={<div>Loading Histórico de Interações...</div>}>
      <HistoryInteractions />
    </Suspense>
  );
}
```

### Method 2: Direct import (for development)

```tsx
import React from 'react';
import HistoryInteractions from 'historyInteractions/HistoryInteractions';

export default function HistoryInteractionsPage() {
  return <HistoryInteractions />;
}
```

## Development

- **Development server**: `npm run dev` (runs on <http://localhost:3009>)
- **Production build**: `npm run build`
- **Testing**: `npm run test`
- **Linting**: `npm run lint`

## Integration with Global Navigation

The HistoryInteractions app integrates with the global navigation system:

```tsx
// The app automatically registers with the global store
// Navigation can be triggered via:
globalStore.navigateTo('historyInteractions');

// Or through direct URL navigation:
window.location.href = '/history-interactions';
```

## Available Props and Configuration

The HistoryInteractions component accepts the following props:

```tsx
interface HistoryInteractionsProps {
  // Currently no props required - uses internal state and global store
  // Future: customerId?: string;
  // Future: dateRange?: { start: Date; end: Date };
  // Future: defaultFilters?: FilterOptions;
}
```

## Styling Integration

Uses Tailwind CSS classes. Ensure your main app includes Tailwind CSS and the shared styles are loaded:

```tsx
import 'shared/styles/global-import';
```

## Mock Data

The component currently uses mock data for demonstration. In production, replace with real API calls:

```tsx
// Current mock data structure
const mockInteractions = [
  {
    id: '1001',
    date: '2024-01-15',
    time: '14:30',
    channel: 'phone',
    type: 'Consulta de Saldo',
    subject: 'Verificação de saldo da conta corrente',
    agent: 'Maria Silva',
    status: 'completed',
    duration: '3:45',
    satisfaction: 5,
  },
  // ... more interactions
];
```

## API Integration Points

Future API integration points:

```tsx
// GET /api/interactions
// Query parameters: dateRange, channel, status, customerId, page, limit

// GET /api/interactions/stats
// Query parameters: dateRange, channel, customerId

// GET /api/interactions/:id
// Get detailed interaction information
```

## Testing the Component

```bash
# Run unit tests
npm run test

# Run with coverage
npm run test:ci

# Run in watch mode
npm run test:watch
```

## Module Federation Configuration

The app exposes its main component for consumption:

```javascript
// webpack.config.js
new ModuleFederationPlugin({
  name: 'historyInteractions',
  filename: 'remoteEntry.js',
  exposes: {
    './HistoryInteractions': './src/HistoryInteractions',
  },
  // ... other config
});
```

## Troubleshooting

### Component not loading

- Ensure the historyInteractions remote is running on port 3009
- Check that Module Federation is properly configured
- Verify the remoteEntry.js is accessible

### Styling issues

- Ensure Tailwind CSS is properly configured in the main app
- Check that the shared styles are imported
- Verify CSS classes are being generated by Tailwind JIT

### Navigation not working

- Ensure the global store is properly initialized
- Check that the navigation bridge is set up in the main app
- Verify routing configuration includes the history-interactions route
